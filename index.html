<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG Per√≠cias e Conjura√ß√£o</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background-color: #1e1e1e; 
            color: #ffffff;
            text-align: center;
        }
        .container { 
            width: 90%; 
            max-width: 500px; 
            margin: auto; 
            background-color: #2e2e2e;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.2);
        }
        .result { 
            font-weight: bold; 
            margin-top: 10px; 
        }
        select, input, button {
            margin-top: 10px;
            padding: 10px;
            width: 100%;
            border: none;
            border-radius: 5px;
            background-color: #444;
            color: white;
        }
        button {
            cursor: pointer;
            background-color: #5a5;
        }
        button:hover {
            background-color: #6b6;
        }
        .dice {
            font-size: 50px;
            margin: 20px;
            opacity: 1;
            transition: transform 1s ease-in-out, opacity 1s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Teste de Per√≠cia</h2>
        <label for="area">√Årea de Per√≠cia:</label>
        <select id="area" onchange="atualizarPericias()">
            <option value="Combate">Per√≠cias de Combate</option>
            <option value="Sociais">Per√≠cias Sociais</option>
            <option value="Conhecimento">Per√≠cias de Conhecimento</option>
            <option value="Explora√ß√£o">Per√≠cias de Explora√ß√£o</option>
            <option value="M√≠sticas">Per√≠cias M√≠sticas</option>
        </select>
        <label for="pericia">Escolha a Per√≠cia:</label>
        <select id="pericia"></select>
        <label for="pontos">Pontos na Per√≠cia:</label>
        <input type="number" id="pontos" value="6" min="0">
        <label for="bonus">B√¥nus na Rolagem:</label>
        <input type="number" id="bonus" value="0">
        <button onclick="rolarDadoPericia()">Rolar 1d20</button>
        <div class="dice" id="dicePericia">üé≤</div>
        <p class="result" id="resultadoPericia"></p>
    </div>

    <div class="container">
        <h2>C√°lculo de DT para Conjura√ß√£o</h2>
        <label for="grau">Grau da Conjura√ß√£o:</label>
        <select id="grau" onchange="calcularDTConjuracao()">
            <option value="4">4¬∞ Grau (1 FE)</option>
            <option value="3">3¬∞ Grau (3 FE)</option>
            <option value="2">2¬∞ Grau (6 FE)</option>
            <option value="1">1¬∞ Grau (10 FE)</option>
            <option value="Especial">Grau Especial (15 FE)</option>
        </select>
        <label for="aprimoramento">Custo de Aprimoramento (FE):</label>
        <input type="number" id="aprimoramento" value="0" min="0" oninput="calcularDTConjuracao()">
        <label for="bonusConjuracao">B√¥nus na Rolagem:</label>
        <input type="number" id="bonusConjuracao" value="0" min="0">
        <p class="result" id="resultadoConjuracao"></p>
        <button onclick="rolarDadoConjuracao()">Rolar 1d20 para Conjura√ß√£o</button>
        <div class="dice" id="diceConjuracao">üé≤</div>
        <p class="result" id="resultadoConjuracaoDetalhado"></p>
    </div>

    <script>
        function atualizarPericias() {
            const pericias = {
                "Combate": ["Pontaria", "Luta", "Reflexo", "Fortitude", "Atletismo", "Acrobacia", "Iniciativa"],
                "Sociais": ["Intimida√ß√£o", "Engana√ß√£o", "Diplomacia", "Intui√ß√£o", "Jogatina", "Nobreza", "Sedu√ß√£o"],
                "Conhecimento": ["Investiga√ß√£o", "Hist√≥ria", "Ci√™ncia", "Tecnologia", "Lingu√≠stica", "Medicina", "T√°tica"],
                "Explora√ß√£o": ["Sobreviv√™ncia", "Furtividade", "Percep√ß√£o", "Pilotagem", "Adestramento", "Cavalgar", "Ladinagem"],
                "M√≠sticas": ["Feiti√ßaria", "Ritu√≠stica", "Misticismo", "Ocultismo", "Religi√£o", "Vontade", "Alquimia"]
            };
            const area = document.getElementById("area").value;
            const periciaSelect = document.getElementById("pericia");
            periciaSelect.innerHTML = "";
            pericias[area].forEach(pericia => {
                const option = document.createElement("option");
                option.value = pericia;
                option.textContent = pericia;
                periciaSelect.appendChild(option);
            });
        }


        function rolarDado(diceElement, resultadoElement, dt) {
            diceElement.style.transform = "rotate(720deg)";
            diceElement.style.opacity = "0";
            setTimeout(() => {
                const dado = Math.floor(Math.random() * 20) + 1;
                diceElement.textContent = dado;
                diceElement.style.transform = "rotate(0deg)";
                diceElement.style.opacity = "1";
                resultadoElement.textContent = `Resultado: ${calcularSucesso(dado, dt)}`;
            }, 1000);
        }
        
        function calcularDTConjuracao() {
            const grau = document.getElementById("grau").value;
            const aprimoramento = parseInt(document.getElementById("aprimoramento").value) || 0;
            let feGasto = { "4": 1, "3": 3, "2": 6, "1": 10, "Especial": 15 }[grau];
            const dtFinal = 15 + feGasto + aprimoramento;
            document.getElementById("resultadoConjuracao").textContent = `DT para Conjura√ß√£o: ${dtFinal}`;
            return dtFinal;
        }

        function rolarDadoConjuracao() {
            const dt = calcularDTConjuracao();
            const bonus = parseInt(document.getElementById("bonusConjuracao").value) || 0;
            rolarDado(document.getElementById("diceConjuracao"), document.getElementById("resultadoConjuracaoDetalhado"), dt + bonus);
        }

        function rolarDadoPericia() {
            const pontos = parseInt(document.getElementById("pontos").value) || 0;
            const bonus = parseInt(document.getElementById("bonus").value) || 0;
            const dt = pontos * 5;
            rolarDado(document.getElementById("dicePericia"), document.getElementById("resultadoPericia"), dt + bonus);
        }

        function calcularSucesso(rolagem, dt) {
            if (rolagem <= 2) return "Falha Cr√≠tica";
            if (rolagem >= dt * 0.98) return "Sucesso Cr√≠tico";
            if (rolagem >= dt * 0.90) return "Sucesso Extremo";
            if (rolagem >= dt * 0.75) return "Sucesso Bom";
            if (rolagem >= dt * 0.60) return "Sucesso Normal";
            return "Falha";
        }
    </script>
</body>
</html>
